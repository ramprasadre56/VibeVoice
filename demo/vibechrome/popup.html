<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeChrome</title>
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="popup-container">
        <!-- Main Player View (Default) -->
        <div class="player-view" id="playerView">
            <!-- Header -->
            <header class="player-header">
                <div class="brand">
                    <svg class="brand-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z" />
                    </svg>
                    <span>VibeChrome</span>
                </div>
                <div class="status-badge" id="statusBadge">
                    <span class="status-dot"></span>
                    <span class="status-text">Connecting...</span>
                </div>
            </header>

            <!-- Now Playing -->
            <div class="now-playing" id="nowPlaying">
                <p class="now-playing-label">Ready to read</p>
                <p class="now-playing-text" id="currentText">Select text or click "Read Page"</p>
            </div>

            <!-- Main Controls -->
            <div class="main-controls">
                <button class="control-btn" id="skipBackBtn" title="Back 10s">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M6 13c0 3.31 2.69 6 6 6s6-2.69 6-6-2.69-6-6-6v4l-5-5 5-5v4c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8h2z" />
                    </svg>
                </button>
                <button class="play-btn" id="playPauseBtn" title="Play/Pause">
                    <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                    <svg class="pause-icon hidden" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                    </svg>
                </button>
                <button class="control-btn" id="skipForwardBtn" title="Forward 10s">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M18 13c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6v4l5-5-5-5v4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8h-2z" />
                    </svg>
                </button>
            </div>

            <!-- Options Row -->
            <div class="options-row">
                <!-- Voice Button -->
                <button class="option-btn" id="voiceBtn">
                    <div class="option-icon voice-avatar" id="currentVoiceAvatar">Vi</div>
                    <div class="option-info">
                        <span class="option-label">Voice</span>
                        <span class="option-value" id="currentVoiceName">Select Voice</span>
                    </div>
                    <svg class="chevron" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                    </svg>
                </button>

                <!-- Speed Button -->
                <button class="option-btn" id="speedBtn">
                    <div class="option-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M20.38 8.57l-1.23 1.85a8 8 0 01-.22 7.58H5.07A8 8 0 0115.58 6.85l1.85-1.23A10 10 0 003.35 19a2 2 0 001.72 1h13.85a2 2 0 001.74-1 10 10 0 00-.27-10.44z" />
                            <path d="M10.59 15.41a2 2 0 002.83 0l5.66-8.49-8.49 5.66a2 2 0 000 2.83z" />
                        </svg>
                    </div>
                    <div class="option-info">
                        <span class="option-label">Speed</span>
                        <span class="option-value" id="speedValue">1.0x</span>
                    </div>
                    <svg class="chevron" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                    </svg>
                </button>
            </div>

            <!-- Action Buttons -->
            <div class="action-row">
                <button class="action-btn primary" id="readPageBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z" />
                    </svg>
                    Read Page
                </button>
                <button class="action-btn" id="readSelectionBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                    </svg>
                    Selection
                </button>
            </div>

            <!-- Footer -->
            <footer class="player-footer">
                <button class="footer-btn" id="settingsBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58z" />
                        <circle cx="12" cy="12" r="3" />
                    </svg>
                    Settings
                </button>
            </footer>
        </div>

        <!-- Voice Picker Panel (Hidden by default) -->
        <div class="voice-panel hidden" id="voicePanel">
            <header class="voice-header">
                <button class="back-btn" id="voiceBackBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <h2>Choose Voice</h2>
                <div class="language-dropdown">
                    <button class="language-btn" id="languageBtn">
                        <span id="selectedLanguage">All</span>
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7 10l5 5 5-5z" />
                        </svg>
                    </button>
                    <div class="language-menu" id="languageMenu">
                        <button class="lang-option active" data-lang="all">All Languages</button>
                        <button class="lang-option" data-lang="en">English</button>
                        <button class="lang-option" data-lang="hi">Hindi</button>
                        <button class="lang-option" data-lang="es">Spanish</button>
                        <button class="lang-option" data-lang="fr">French</button>
                        <button class="lang-option" data-lang="de">German</button>
                    </div>
                </div>
            </header>

            <!-- Search -->
            <div class="voice-search">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                </svg>
                <input type="text" id="voiceSearch" placeholder="Search voices...">
            </div>

            <!-- Voice List -->
            <div class="voice-list" id="voiceList">
                <div class="voice-loading">Connecting...</div>
            </div>
        </div>

        <!-- Speed Panel (Hidden by default) -->
        <div class="speed-panel hidden" id="speedPanel">
            <header class="speed-header">
                <button class="back-btn" id="speedBackBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <h2>Reading Speed</h2>
            </header>
            <div class="speed-options">
                <button class="speed-option" data-speed="0.5">0.5x</button>
                <button class="speed-option" data-speed="0.75">0.75x</button>
                <button class="speed-option active" data-speed="1.0">1.0x</button>
                <button class="speed-option" data-speed="1.25">1.25x</button>
                <button class="speed-option" data-speed="1.5">1.5x</button>
                <button class="speed-option" data-speed="1.75">1.75x</button>
                <button class="speed-option" data-speed="2.0">2.0x</button>
            </div>
        </div>

        <!-- Settings Panel (Hidden by default) -->
        <div class="settings-panel hidden" id="settingsPanel">
            <header class="settings-panel-header">
                <button class="back-btn" id="settingsBackBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <h2>Settings</h2>
            </header>
            <div class="settings-content">
                <div class="settings-group">
                    <label for="serverUrlInput">Server URL</label>
                    <input type="text" id="serverUrlInput" placeholder="https://your-server.trycloudflare.com">
                    <small>Enter your VibeVoice server URL (from Colab/ngrok)</small>
                </div>
                <button class="save-url-btn" id="saveServerUrl">Save & Connect</button>
                <div class="more-settings">
                    <a href="#" id="openFullSettings">More Settings â†’</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden elements -->
    <select id="voiceSelect" style="display:none;"></select>
    <input type="range" id="speedSlider" style="display:none;" min="0.5" max="2.0" step="0.1" value="1.0">

    <script src="popup.js"></script>
</body>

</html>